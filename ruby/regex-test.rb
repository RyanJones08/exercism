# text = ""

text = File.read("../log.txt")

# text = "\"api_call_payload\": \"= Request\n\n! CONNECT TO web.quark.svc.cluster.local:80\n! CONNECTION ESTABLISHED\nPOST /fhb-q2/authentications HTTP/1.1\r\nAccept: application/vnd.mx.mdx.v6+json\r\nmx-trace-id: TRC-8cc290ca-2c84-4f23-a0a7-f082f0c33221\r\nmx-client-guid: CLT-a16155e9-9cad-4a9f-a40b-077c1638a39b\r\nmx-device-ip-address: 136.36.72.64\r\nmx-device-trace-id: 3c7773d7-d757-42e6-a078-abf7d1b71e97\r\nmx-session-trace-id: 3b160213-ab15-4de2-b80c-b14f720d7036\r\nmx-feature: identity\r\nContent-Type: application/vnd.mx.mdx.v6+json\r\nAuthorization: MDX sha1 f9c41d042fa94ee446a8c4de8b49c4f61e08f6d3\r\nDate: Wed, 16 Aug 2023 20:57:32 GMT\r\nX-B3-ParentSpanId: 5aa252dfac1bbb21\r\nX-B3-Sampled: 0\r\nX-B3-SpanId: 4b8b682eaa606ce\r\nX-B3-TraceId: 5aa252dfac1bbb21\r\nUser-Agent: HTTPClient/1.0 (2.8.3, ruby 2.6.8 (2023-02-01))\r\nContent-Length: 2847\r\nHost: web.quark.svc.cluster.local\r\n\r\n{\"authentication\":{\"login\":\"-q2usermx_disclaimer2\",\"password\":\"**MASKED**\",\"app_version\":\"6.2.5\",\"client_device_token\":\"TUv6i3b47Mk%3d=DYW0tTCcft8YxyVbeH7irgKsQ8sc3H2%2fx6yg6E81rdulZO3OnNfnyA%3d%3d; ufHJO9vXLiw=1oX64cCa9h9DUEu5xsRcsg==\",\"device_os_id\":null,\"device_altitude\":null,\"device_altitude_accuracy\":null,\"device_cell_tower_id\":null,\"device_geolocation_at\":null,\"device_geolocation_heading\":null,\"device_geolocation_horizontal_accuracy\":null,\"device_geolocation_speed\":null,\"device_hardware_id\":null,\"device_id\":\"**MASKED**\",\"device_ip_address\":\"136.36.72.64\",\"device_is_jailbroken\":false,\"device_is_multitasking_supported\":null,\"device_iovation_token\":\"**MASKED**\",\"device_languages\":null,\"device_latitude\":0.0,\"device_location_area_code\":null,\"device_longitude\":0.0,\"device_make\":\"samsung\",\"device_mobile_carrier_code\":null,\"device_mobile_country_code\":null,\"device_model\":\"SM-G991U1\",\"device_name\":\"SM-G991U1\",\"device_operating_system\":\"android\",\"device_operating_system_version\":\"11\",\"device_phone_area_code\":null,\"device_phone_country_code\":null,\"device_phone_extension\":null,\"device_phone_number\":null,\"device_rsa_token\":\"\",\"device_screen_height\":2256,\"device_screen_width\":1080,\"device_sim_id\":null,\"device_vendor_client_id\":null,\"device_wifi_bbsid\":null,\"device_wifi_channel\":null,\"device_wifi_mac_address\":null,\"device_wifi_signal_strength\":null,\"device_wifi_station_name\":null}}\n\n= Response\n\nHTTP/1.1 202 Accepted\r\nmx-auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOm51bGwsInNlc3Npb25JZCI6IjZiMTBiNTQyLWI2OTItNDY0MS1hZjBiLTE5MjdiODUzYmM0NCIsImlzcyI6ImZoYi1xMiIsImV4cCI6MTY5MjIyMTI1NSwiaWF0IjoxNjkyMjE5NDU1fQ.GFSvR3KibTGisUOTGeaYNwpAfWbNu4VncNM6ZZeBPnw\r\nmx-session-key: ****b853bc44\r\ncontent-type: application/vnd.mx.mdx.v6+json;charset=UTF-8\r\ndate: Wed, 16 Aug 2023 20:57:35 GMT\r\nx-envoy-upstream-service-time: 2798\r\nserver: envoy\r\ntransfer-encoding: chunked\r\n\r\n7e26\r\n{\n  \"authentication\": {\n    \"challenges\": [\n      {\n        \"id\": \"DISCLAIMERS\",\n        \"questions\": [\n          {\n            \"id\": \"2\",\n            \\\"prompt\\\": \\\"\\u003cstyle\\u003e\\r\\n    .grey-text {\\r\\n        color: #808080;\\r\\n    }\\r\\n\\r\\n    .blue-text {\\r\\n        color: #4F81BD;\\r\\n    }\\r\\n\\r\\n    .toc {\\r\\n        padding-left: 0px;\\r\\n        margin-left: 0px;\\r\\n        list-style: none;\\r\\n    }\\r\\n\\r\\n    .toc h4,\\r\\n    .toc li .item {\\r\\n        color: #808080;\\r\\n        font-weight: bold;\\r\\n        text-transform: uppercase;\\r\\n    }\\r\\n\\r\\n    .toc li .item {\\r\\n        display: flex;\\r\\n        justify-content: space-between;\\r\\n    }\\r\\n\\r\\n    .toc li .item p {\\r\\n        margin: 0px\\r\\n    }\\r\\n\\r\\n    .sub-list li div {\\r\\n        color: #000000;\\r\\n        font-weight: 400;\\r\\n        display: flex;\\r\\n        justify-content: space-between;\\r\\n    }\\r\\n\\r\\n    .sub-list p {\\r\\n        margin: 5px 0px;\\r\\n    }\\r\\n\\r\\n    .page-number {\\r\\n        display: flex;\\r\\n        justify-content: space-between;\\r\\n    }\\r\\n\\u003c/style\\u003e\\r\\n\\r\\n\\u003cdiv class\\u003d\\\"ws_html_conversion\\\" style\\u003d\\\"font-family: Open Sans, Arial, sans-serif;\\\"\\u003e\\r\\n\n            \\\"title\\\": \\\"FHB Online \\\\u0026 Mobile Terms \\\\u0026 Conditions\"\n          }\n        ],\n        \"type\": \"TERMS\"\n      }\n    ],\n    \"id\": \"6b10b542-b692-4641-af0b-1927b853bc44\"\n  }\n}\r\n0\r\n\r\n"
# puts text
# puts "----------------------------------------------------------"
WEBVIEW_PATTERN = /\\"prompt\\"\s*:\s*\\"(.*?)\\"title\\"\s*:\s*\\"FHB Online \\\\u0026 Mobile Terms \\\\u0026 /m
# WEBVIEW_PATTERN = /\\"prompt\\"\s*:\s*\\"(.*?)/m

# matches = text.scan(WEBVIEW_PATTERN)
matches = text.gsub(WEBVIEW_PATTERN, "\1DATA-TRUNCATED-FOR-LOG")

if matches && matches[0]
  puts matches
else
  puts "No match found"
end
